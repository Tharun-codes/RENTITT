<!DOCTYPE html>
<html>
<head>
  <title>Login - RENTit</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white flex justify-center items-center min-h-screen">

  <div class="bg-slate-800 p-6 rounded-lg w-[350px]">
    <h2 class="text-xl font-bold mb-4 text-center">Login / Register</h2>

    <input id="emailInput"
           type="email"
           placeholder="Enter your email"
           class="w-full p-2 rounded text-black mb-3">

    <button onclick="login()"
            class="bg-indigo-600 w-full py-2 rounded hover:bg-indigo-500">
      Login / Register
    </button>

    <p id="msg" class="mt-3 text-sm text-center"></p>
  </div>

<script>
async function login() {
  const email = document.getElementById("emailInput").value;
  const msg = document.getElementById("msg");

  if (!email) {
    msg.textContent = "Email is required!";
    msg.style.color = "red";
    return;
  }

  try {
    const res = await fetch("http://localhost:5000/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email })
    });

    const data = await res.json();

    if (!res.ok) {
      msg.textContent = data.error;
      msg.style.color = "red";
      return;
    }

    localStorage.setItem("token", data.token);

    msg.textContent = "Login Successful ✅";
    msg.style.color = "lightgreen";

    setTimeout(() => {
      window.location.href = "index.html";
    }, 1000);

  } catch (err) {
    msg.textContent = "Server not responding ❌";
    msg.style.color = "red";
  }
}
</script>

</body>
</html>
